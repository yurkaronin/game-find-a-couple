// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
document.addEventListener('DOMContentLoaded', () => {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–≥—Ä—ã –ø–æ –∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º –∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º
    const gameBoard = document.getElementById('gameBoard'); // –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
    const errorCountElement = document.getElementById('errorCount'); // —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—à–∏–±–æ–∫
    const restartButton = document.getElementById('restartButton'); // –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
    const winImage = document.querySelector('img[alt="–∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è"]'); // –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–±–µ–¥—ã
    const loseImage = document.querySelector('img[alt="–∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø—Ä–æ–∏–≥—Ä–∞–≤—à–µ–≥–æ"]'); // –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã—à–∞
    const winMessage = document.getElementById('winMessage'); // —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ
    const loseMessage = document.getElementById('loseMessage'); // —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–∏–≥—Ä—ã—à–µ

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
    const cards = ['üçé', 'üçå', 'üçì', 'üçá', 'üçé', 'üçå', 'üçì', 'üçá']; // –º–∞—Å—Å–∏–≤ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
    let chosenCards = []; // –º–∞—Å—Å–∏–≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
    let chosenCardsId = []; // –º–∞—Å—Å–∏–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
    let errors = 6; // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –æ—à–∏–±–æ–∫
    let matches = 0; // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø–∞—Ä

    // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫
    cards.sort(() => 0.5 - Math.random());

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
    function createBoard() {
        for (let i = 0; i < cards.length; i++) {
            const card = document.createElement('div'); // —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏
            card.classList.add('card'); // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
            card.setAttribute('data-id', i); // —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
            card.addEventListener('click', flipCard); // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–ª–∏–∫–∞
            gameBoard.appendChild(card); // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ
    function flipCard() {
        let cardId = this.getAttribute('data-id'); // –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
        chosenCards.push(cards[cardId]); // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –º–∞—Å—Å–∏–≤
        chosenCardsId.push(cardId); // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –≤ –º–∞—Å—Å–∏–≤
        this.innerHTML = cards[cardId]; // –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
        if (chosenCards.length === 2) {
            setTimeout(checkForMatch, 500); // –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 0.5 —Å–µ–∫—É–Ω–¥—ã
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
    function checkForMatch() {
        const allCards = document.querySelectorAll('.card'); // –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
        const firstCardId = chosenCardsId[0];
        const secondCardId = chosenCardsId[1];

        if (chosenCards[0] === chosenCards[1] && firstCardId !== secondCardId) {
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç –∏ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –∫–∞—Ä—Ç–æ—á–∫–æ–π
            allCards[firstCardId].style.visibility = 'hidden'; // —Å–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
            allCards[secondCardId].style.visibility = 'hidden'; // —Å–∫—Ä—ã—Ç–∏–µ –≤—Ç–æ—Ä–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
            matches++; // —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
        } else {
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç
            allCards[firstCardId].innerHTML = ''; // —Å–±—Ä–æ—Å –ø–µ—Ä–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
            allCards[secondCardId].innerHTML = ''; // —Å–±—Ä–æ—Å –≤—Ç–æ—Ä–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
            errors--; // —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø–æ–ø—ã—Ç–æ–∫
            errorCountElement.innerText = `–ü–æ–ø—ã—Ç–æ–∫ –æ—Å—Ç–∞–ª–æ—Å—å: ${errors}`; // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
            if (errors === 0) {
                gameOver(false); // –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–∏–≥—Ä—ã—à–∞
                return;
            }
        }

        chosenCards = []; // —Å–±—Ä–æ—Å –º–∞—Å—Å–∏–≤–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
        chosenCardsId = []; // —Å–±—Ä–æ—Å –º–∞—Å—Å–∏–≤–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
        if (matches === cards.length / 2) {
            gameOver(true); // –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã –≤ —Å–ª—É—á–∞–µ –ø–æ–±–µ–¥—ã
        }
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
    function gameOver(isWin) {
        gameBoard.style.display = 'none'; // —Å–∫—Ä—ã—Ç–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        errorCountElement.style.display = 'none'; // —Å–∫—Ä—ã—Ç–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –æ—à–∏–±–æ–∫
        restartButton.style.display = 'block'; // –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
        if (isWin) {
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤—ã–∏–≥—Ä–∞–ª
            winImage.style.display = 'block'; // –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–±–µ–¥—ã
            winMessage.style.display = 'block'; // –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ
        } else {
            // –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –ø—Ä–æ–∏–≥—Ä–∞–ª
            loseImage.style.display = 'block'; // –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–∏–≥—Ä—ã—à–∞
            loseMessage.style.display = 'block'; // –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–∏–≥—Ä—ã—à–µ
        }
        restartButton.addEventListener('click', () => location.reload()); // –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
    }

    createBoard(); // –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
});
